---
meta:
  title: Managing Block Storage volumes with the Scaleway CSI
  description: This page explains how to manage Block Storage volumes with the Scaleway CSI.
content:
  h1: Managing Block Storage volumes with the Scaleway CSI
  paragraph: This page explains how to manage Block Storage volumes with the Scaleway CSI.
tags: block-storage scaleway-csi kubernetes pvc
dates:
  validation: 2024-08-20
  posted: 2021-08-12
categories:
  - kubernetes
---

<Macro id="iam-requirements" />

<Message type="requirement">
  - You have an account and are logged into the [Scaleway console](https://console.scaleway.com)
  - You have [created](/containers/kubernetes/how-to/create-cluster/) a Kubernetes cluster running on Scaleway Instances (v1.21+)
</Message>

The Scaleway Block Volume CSI driver is responsible for the management of Scaleway Block Volumes within Kubernetes. Pre-installed on Kubernetes Kapsule and Kosmos clusters, this driver allows you to control Block Volumes directly from your orchestration environment. The plugin resides in the `kube-system` namespace within the pods.

<Message type="tip">
    Refer to our video tutorial [Getting Started with Kubernetes Part 4 - Storage](/containers/kubernetes/videos/) to view a visual presentation and step-by-step guidance of how to manage Block Storage volumes on Kubernetes with the Scaleway CSI.
</Message>

## Verification of CSI driver status

To verify if the driver is running, use the following command:

```bash
kubectl get csidriver
```

The output of this command provides a quick status update on the CSI plugin within your Kubernetes cluster. For the latest features and enhancements, consider upgrading to [release 0.3](https://github.com/scaleway/scaleway-csi/tree/release-0.3#block-storage-low-latency), which supports **[Block Storage low latency](/storage/block/quickstart/)** volumes.

To identify your current CSI release version, navigate to the [Cockpit interface](/observability/cockpit/how-to/access-grafana-and-managed-dashboards/), specifically the **Kubernetes Cluster - Overview** dashboard.

<Message type="note">
   * Block volumes and snapshots management have transitioned to the [Scaleway Block Storage API](https://www.scaleway.com/en/developers/api/block/). This means, you can view your block volumes in the [Block Storage](https://console.scaleway.com/block-storage/volumes) section of the Scaleway console.
   * Anticipate the availability of the **boot on block** feature for low-latency Block Storage volumes in Q2.
</Message>

## Upgrading to CSI version 0.3

### Using the API with curl

You can trigger the migration to SBS-CSI using the following `curl` command:

```bash
curl "https://api.scaleway.com/k8s/v1/regions/$REGION/clusters/$CLUSTER_ID/migrate-to-sbs-csi" \
-X POST \
-H "X-Auth-Token: $TOKEN"
```

Replace the placeholders with the following:

- `$REGION`: Your cluster's region (e.g., `fr-par`, `nl-ams`).
- `$CLUSTER_ID`: Your cluster ID.
- `$TOKEN`: Your Scaleway API token.

This command will initiate the migration process for your cluster to the new SBS-CSI.

### Using the Scaleway CLI

Alternatively, you can use the Scaleway CLI to perform the migration. Ensure the CLI is installed and configured with your API credentials.

1. Install and configure the Scaleway CLI, if you have not already:
   ```bash
   scw init
   ```

2. Run the migration command:

   ```bash
   scw k8s cluster migrate-to-sbs-csi $CLUSTER_ID --region=$REGION
   ```

   Replace `$REGION` and `$CLUSTER_ID` with your clusterâ€™s region and ID, respectively.

### Post-migration verification

After initiating the migration, the cluster status will change to _updating_. Once the migration completes, you can verify that the CSI driver has been updated and that the new driver properly handles Persistent Volume Claims (PVCs).

```bash
kubectl get csidriver
```

This command will confirm that the migration was successful.

## Going further

* [Creating persistent volumes with Scaleway Block Storage](hhttps://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#pvc--deployment)
* [Creating raw block volumes](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#raw-block-volumes)
* [Importing existing Scaleway volumes](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#importing-existing-scaleway-volumes)
* [Creating Volume Snapshots](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#volume-snapshots)
* [Importing Volume Snapshots](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#importing-snapshots)
* [How to create a Storage Class](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#different-storageclass)
* [How to choose a zone for the volumes](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#specify-in-which-zone-the-volumes-are-going-to-be-created)
* [How to choose the number of IOPS](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#choose-the-number-of-iops)
    <Message type="tip">
      * `sbs-5k` and `sbs-15k` are pre-configured storage classes designed to meet your IOPS requirements. You can achieve the equivalent of setting `iops:5k` in your custom class.
    </Message>
* [Encrypting volumes](https://github.com/scaleway/scaleway-csi/tree/release-0.3/examples/kubernetes#encrypting-volumes)
