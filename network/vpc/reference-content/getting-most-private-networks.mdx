---
meta:
  title: Getting the most from Private Networks
  description: Optimize your Scaleway VPCs, Private Networks and resource connectivity with this guide which details tips and best practices.
content:
  h1: Getting the most from Private Networks
  paragraph: Optimize your Scaleway VPCs, Private Networks and resource connectivity with this guide which details tips and best practices.
tags: vpc private-network connectivity best-practice
dates:
  validation: 2024-08-28
  posted: 2024-08-28
categories:
  - network
---

This document sets out guidance, advice and best practices for building and optimizing your Scaleway VPCs and Private Networks.

## What are Private Networks and VPCs?

VPC allows you to build your own **V**irtual **P**rivate **C**loud on top of Scaleway's shared public cloud. Within each VPC, you can create **Private Networks**. Resources attached to Private Networks can communicate securely between themselves, away from the public internet, reducing security risks by ensuring traffic is isolated from public routes.

The VPC operates at the network layer (layer 3) of the OSI model, while Private Networks are a layer 2 resource. As such, a VPC is responsible for routing packets between its different Private Networks. The [**VPC Routing**](TODO) feature auto-creates managed routes between the Private Networks of a VPC, so resources on different Private Networks within a VPC can communicate. You can also use [InterLink](TODO) to connect your VPC to your own on-premises infrastructure. Meanwhile, Private Networks provide network isolation within a VPC and enable you to segment your resources and traffic across different subnets.

<Lightbox src="scaleway-vpc-osi.webp" alt="A graphic shows a simplified version of the seven layers of the OSI networking model (1: Physical, 2: Link, 3: Network, 4: Transport, 5: Session, 6: Presentation, 7: Application). The OSI model shows how different protocols work together and communicate in a networked environment. Scaleway VPC sits at level 3, and Scaleway Private Networks site at level 2." />

VPCs and Private Networks are both **regional** resources. When you create a Private Network in a VPC, it is necessarily scoped to the same region as the VPC. Some Scaleway resources are also regional, others are zonal and scoped to a single Availability Zone (AZ). When attaching resources to a Private Network, you can attach resources from any AZ within the Private Network's region, allowing for example an Elastic Metal server in PAR-2 to communicate securely, away from the public internet, with an Instance in PAR-1 and a Managed Database in PAR-3.

<Lightbox src="scaleway-vpc-schema.webp" alt="A graphic shows how resources in three different AZs are connected and isolated from the internet by a Pirvate Network in the Paris region." />

| Region                  | Availability Zones        |
|-------------------------|---------------------------|
| France - Paris          | PAR1, PAR2, PAR3          | 
| Netherlands - Amsterdam | AMS1, AMS2, AMS3          |
| Poland - Warsaw         | WAW1, WAW2, WAW3          |

One default VPC for each region is automatically created in each Scaleway [Project](/identity-and-access-management/organizations-and-projects/concepts/#project).

## Designing your network topology

When you start creating resources and building your infrastructure with Scaleway, take some time to consider and plan your network topology. We recommend that you build your VPC infrastructure with **separation of concerns** in mind. Separation of concerns is a fundamental design principle aimed at breaking down large complex systems into smaller, distinct components each with clear responsibilities and interfaces. This kind of design will future-proof your VPC and come into its own when Scaleway introduces features such as custom routing and ACLs.

 Separating resources into different Private Networks according to function and usage can:
- Improve network performance by reducing broadcast traffic and congestion
- Enhance manageability via a logical organization of resources
- Enable easier troubleshooting, monitoring and maintenance
- Allow for easier scalability

For example, you may use one Private Network for frontend resources and another for backend resources, limiting public access only via Load Balancers and/or Public Gateways, stripping other resources of public IP addresses. You may want to create different VPCs for production and test environments, allowing you isolate potential errors in testing from the production environment.

When [creating a Private Network](/network/vpc/how-to/create-private-network/), you can let Scaleway automatically generate a CIDR block for it that is guaranteed to be unique in this VPC. All resources attached to the Private Network will be allocated a private IP address from this block. However, you also have the option to define your own CIDR block for the network. Ensure you choose a prefix and network size that is appropriate for your needs, does not overlap with that of any other Private Network in the VPC, and contains enough IP addresses for all resources that will be attached to the Private Network.

## Attaching resources to Private Networks

When you attach a resource (e.g. an Instance, an Elastic Metal server) to a Private Network, you can either:
- Let Scaleway automatically assign any IP address from the Private Network's CIDR block to use for the attachment, or
- Define a specific, reserved IP address from the CIDR block to use for the attachment.

### Auto-assigning any available IP address

This solution is best for simplicity, dynamic environments, and short-lived resources. It can be especially useful in large-scale deployments where manual IP management could be cumbersome. When you let Scaleway automatically assign IP addresses, we ensure there are no IP conflicts within your VPC, reducing any risk of human error.

Note that when you select this option, the IP address randomly assigned to the resource will be stable, and does not risk changing until you detach the resource from the Private Network. At this point, the private IP address is released back into the pool of generally available addresses from the network's CIDR block, and may be auto-assigned to another resource requesting attachment.

### Using reserved IP addresses

You can reserve private IP addresses from your Private Networks' CIDR blocks thanks to Scaleway's [**IP A**ddress **M**anagement solution](/network/ipam/), which helps you plan, track and manage the IP address space of your VPCs and their Private Networks. Simply select the Private Network you want to reserve an IP address on, and choose to either reserve any available address, or a specific address not currently attached to any resource. The reserved address will then not risk being auto-assigned by Scaleway to other resources during network attachment, and can be kept until you are ready to use it to attach a specific resource.

Further, when you attach a resource to a Private Network and specify a reserved IP to use, the IP will remain reserved even after you detach the resource from the network. You can choose to either release the IP back into the pool, or keep it reserved until you use it to attach another resource.

Using reserved IP addresses is ideal to ensure that certain IP addresses are never released into the general pool and kept for certain critical resources with fixed IP requirements, even when that resource is detached from the Private Network, or when migrating between resources. Reserved IP addresses may also be useful where your Private Network is extending or integrating with external networks via InterLink or manual VPNs, or to assign addresses to virtual machines hosted on Elastic Metal servers via Proxmox.

## NOT GIVING A PUBLIC IP

- Public Gateways
- Load Balancers
- VPC Routing
- VPC Peering

For secure, dedicated connectivity between resources in a Scaleway VPC and your on-premises architecture, consider creating an [InterLink](TODO). Otherwise, you may consider installing a manual VPN on a Scaleway Instance to connect to other non-Scaleway infrastructure, and create a [custom route](TODO) towards this VPN so traffic on your Private Network can securely communicate with resources at the other end of your VPN tunnel. 

## Security best practices

- Security groups and network ACLs
- Monitoring and logging (Utilizing cloud provider tools for network traffic analysis and security auditing.)
- Apply the principals of zero trust networking

## Cost management
- Understand pricing
- Avoid common pitfalls that can lead to unexpected charges via cost optimization

## Use cases


## 